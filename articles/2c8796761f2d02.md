---
title: "GraphQL Fragment Colocationのすすめ"
emoji: "😸"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["javascript", "react", "typescript", "graphql", "apollo"]
published: false
---

<!--
- 対象読者: GraphQL初めて間もない人, Fragment Colocationやったことがない人
 -->

## はじめに

GraphQL の Fragment Colocation という概念を知り、最近リファクタリングを行ったのでこの記事ではその紹介をします。
REST を使用していた頃から不満に感じていたものの、解決が難しいと感じていた課題が Fragment Colocation で見事に解決されたため GraphQL を使用している場合、必ず知っておいた方が良い概念だなと思います。

また、前提としてこの記事では Apollo（もしくは Urql 等のデータフェッチライブラリ）を使用していることを想定しています。
Relay を使用している場合フェッチデータの宣言をデータを使用する各コンポーネントで記述することが強制されるため、自然と Fragment Colocation を使用した実装になります。

## 既存の問題点

リファクタリングを行う前はデータフェッチを各ページのトップ層、もしくはグローバルなファイルで管理していました。

```tsx:SomePage.tsx

```

## 参考

- https://gist.github.com/Quramy/566ea87d0121ceb8cd97ad9d14b63fd8
- https://zenn.dev/izumin/scraps/46aba5181afe82
- https://quramy.medium.com/render-as-you-fetch-incremental-graphql-fragments-70e643edd61e
